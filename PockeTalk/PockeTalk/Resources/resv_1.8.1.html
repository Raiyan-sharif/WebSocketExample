
<!DOCTYPE html>
<html>
<head>
    <title>WebViewCommunication</title>
    <body>
        <h1>Hello</h1>
    </body>
    <script src="resv_src.js"></script>
    <script type="text/javascript">
        function voiceStartCallback() {
            //interface.start()
            webkit.messageHandlers.iosListener.postMessage("Start");
            console.log("Voice started");
        }

        function voiceEndCallback() {
            //interface.end()
            webkit.messageHandlers.iosListener.postMessage("end");
            console.log("Voice ended");
        }
        
        var parameters = {
            onstart: voiceStartCallback,
            onend: voiceEndCallback,
            rate:"1.0",
            volume:"1"
        }
        
        function onLogReceived(l){
            //webkit.messageHandlers.iosListener.postMessage(l);
        }
        
        function multipartUrlReceived(url){
            webkit.messageHandlers.multipartUrlListener.postMessage(url);
        }

        function setPitchRate(rate){
            parameters.rate = rate;
        }
        
        function play(voice,text){
            responsiveVoice.setLogger({
                onlog: onLogReceived
            });
            responsiveVoice.setMultiPartListener({
                onUrlReceived: multipartUrlReceived
            });
            responsiveVoice.clickEvent();
           // responsiveVoice.setDefaultVoice(voice);
           // responsiveVoice.speak(text);
            responsiveVoice.speak(text, voice, parameters);
        }
        
        function cancel() {
            responsiveVoice.cancel();
        }

        function isSpeaking() {
            webkit.messageHandlers.speakingListener.postMessage(responsiveVoice.isPlaying());
            //responsiveVoice.isPlaying();
        }
            //setTimeout(sayIt, 3000);
        </script>
</head>
